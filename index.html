<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üì° Live NGROK + Site Status</title>
  <style>
    body {
      background: #121212;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 700px;
      margin: 3rem auto;
      padding: 1rem 2rem;
      line-height: 1.4;
    }
    h1 {
      text-align: center;
      color: #0ff;
      margin-bottom: 1.5rem;
      font-weight: 900;
      letter-spacing: 0.1em;
    }
    #status {
      font-size: 1.8rem;
      text-align: center;
      margin-bottom: 2rem;
      font-weight: 700;
    }
    .up {
      color: #0f0;
    }
    .down {
      color: #f44;
    }
    ul {
      list-style: none;
      padding-left: 0;
      border: 1px solid #333;
      border-radius: 8px;
      background: #222;
      max-height: 350px;
      overflow-y: auto;
      box-shadow: 0 0 10px #0ff44a44;
    }
    li {
      padding: 0.6rem 1rem;
      border-bottom: 1px solid #333;
      font-weight: 600;
      font-size: 1rem;
    }
    li:last-child {
      border-bottom: none;
    }
    li.up {
      color: #0f0;
    }
    li.down {
      color: #f44;
    }
  </style>
</head>
<body>
  <h1>üì° NGROK + Site Status Dashboard</h1>
  <div id="status">Loading status‚Ä¶</div>

  <h2>üß© Routes</h2>
  <ul id="routes"></ul>

  <script>
    fetch('status.json')
      .then(res => res.json())
      .then(data => {
        const live = document.getElementById('status');
        if (data.currentStatus === "UP") {
          live.textContent = "‚úÖ NGROK + SITE UP";
          live.className = "up";
        } else if (data.currentStatus === "DOWN") {
          live.textContent = "‚ö†Ô∏è SITE DOWN (but ngrok alive)";
          live.className = "down";
        } else {
          live.textContent = "‚ùå NGROK OFFLINE";
          live.className = "down";
        }

        // Replace route list
        const routeList = document.getElementById('routes');
        routeList.innerHTML = '';
        data.routes.forEach(r => {
          const li = document.createElement('li');
          if (r.status === 200) {
            li.innerHTML = `‚úÖ ${r.path} is UP`;
            li.className = 'up';
          } else if (r.status === "NGROK_OFFLINE") {
            li.innerHTML = `‚ùå ${r.path} ‚Äî NGROK OFFLINE`;
            li.className = 'down';
          } else {
            li.innerHTML = `‚ùå ${r.path} ‚Äî ${r.status}`;
            li.className = 'down';
          }
          routeList.appendChild(li);
        });
      })
      .catch(err => {
        const live = document.getElementById('status');
        live.textContent = "‚ùå Failed to load status.json";
        live.className = "down";
        console.error("Fetch error:", err);
      });
  </script>
</body>
</html>
