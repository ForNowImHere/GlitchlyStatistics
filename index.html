fetch('status.json')
  .then(res => res.json())
  .then(data => {
    const live = document.getElementById('status');
    if (data.currentStatus === "UP") {
      live.textContent = "✅ NGROK + SITE UP";
      live.className = "up";
    } else if (data.currentStatus === "DOWN") {
      live.textContent = "⚠️ SITE DOWN (but ngrok alive)";
      live.className = "down";
    } else {
      live.textContent = "❌ NGROK OFFLINE";
      live.className = "down";
    }

    // Replace route list
    const routeList = document.getElementById('routes');
    routeList.innerHTML = '';
    data.routes.forEach(r => {
      const li = document.createElement('li');
      if (r.status === 200) {
        li.innerHTML = `✅ <span class="up">${r.path}</span> is UP`;
      } else if (r.status === "NGROK_OFFLINE") {
        li.innerHTML = `❌ <span class="down">${r.path}</span> — NGROK OFFLINE`;
      } else {
        li.innerHTML = `❌ <span class="down">${r.path}</span> — ${r.status}`;
      }
      routeList.appendChild(li);
    });
  });
